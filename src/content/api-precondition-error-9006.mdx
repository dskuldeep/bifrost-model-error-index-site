---
title: "Invalid response recieved from google: [{\"error\":{\"code\":400,\"message\":\"User location is not supported for the API use.\",\"status\":\"FAILED_PRECONDITION\"}}]"
provider: "google"
provider_icon: "/logos/google.png"
solved: true
slug: "api-precondition-error-9006"
---

## Reason

The 400 Bad Request error with the status `FAILED_PRECONDITION` occurs when the API request is syntactically correct but cannot be completed due to the current state of the environmentâ€”specifically, the geographic location of the requester. 

Key reasons for this error include:
1. **Geographical Restrictions**: The most common cause is that the Google Gemini API or Google AI Studio service is not yet available in the country or territory where your request originates (e.g., certain European regions or countries with strict data regulations).
2. **Unsupported Request Configuration**: The error indicates that the "User location" parameter is either not supported by the specific model you are calling or the way it is being used in the request header/context is prohibited.
3. **Server-Side IP Geolocation**: Google uses the source IP address of the client or the hosting server (such as a VPS, Cloud Function, or Colab instance) to determine eligibility. Even if you are in a supported region, if your server/VPS is hosted in an unsupported data center (like certain Hetzner or AWS regions), the request will fail.
4. **Invalid Request Syntax or Parameters**: In some cases, the request may be missing a required field or contain invalid values that prevent the server from processing the call under the current regional constraints.

## Solution
To resolve the "User location is not supported for the API use" error, you must ensure your requests originate from a supported geographic region. Follow these remediation steps:
1. **Verify Your Current Region**: Identify the IP address location from which your requests are sent. If using a cloud server or Google Colab, you can check the instance's location by running `!curl ipinfo.io` in your environment.
2. **Relocate Your Service**: If your application is hosted on a VPS or cloud provider, migrate your service to a supported Google Cloud region such as `us-central1`, `us-west1`, or `europe-west1`. Ensure that the specific model (e.g., Gemini 1.5 Pro) is available in that target region.
3. **Switch to Vertex AI**: If you are restricted by Google AI Studio's regional limitations, consider using the Vertex AI platform on Google Cloud. Vertex AI often has broader regional support and allows you to explicitly specify a regional endpoint (e.g., `us-central1-aiplatform.googleapis.com`) which can bypass certain AI Studio restrictions.
4. **Use a VPN or Proxy**: For development purposes, you can use a VPN or a proxy to route your traffic through a supported country. Note that this may introduce latency and is generally not recommended for production environments.
5. **Check Official Availability Lists**: Regularly consult Google's documentation to see if support has been expanded to your region, as availability for generative AI models is updated frequently.

## Suggested Links
- [https://ai.google.dev/gemini-api/docs/available-regions](https://ai.google.dev/gemini-api/docs/available-regions)
- [https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations)
- [https://discuss.ai.google.dev/t/does-anyone-know-why-i-receive-a-400-error/537](https://discuss.ai.google.dev/t/does-anyone-know-why-i-receive-a-400-error/537)
