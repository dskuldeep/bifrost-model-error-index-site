---
title: "system: text content blocks must be non-empty"
provider: "anthropic"
provider_icon: "/logos/anthropic.png"
solved: true
slug: "input-validation-error-9190"
---

## Reason

The HTTP 400 Bad Request error with the message "system: text content blocks must be non-empty" occurs when a request is sent to the Anthropic Messages API with a `system` parameter or a content block that contains no text. 

Key reasons for this error include:
1. **Empty System Prompt**: The `system` parameter is provided as an empty string (`""`) or a null value, which the API does not allow if the parameter is present.
2. **Invalid Request Format**: The request body is not correctly structured. Specifically, text content blocks within the `messages` array or the `system` field are defined but contain no actual string data.
3. **Dynamic Template Failure**: In frameworks like LangChain or Continue, a system prompt template may evaluate to an empty string if the input variables are missing or undefined.
4. **Incorrect Data Types**: Providing an object or an array where a non-empty string is expected, or vice versa, leading to validation failure at the API gateway.

## Solution
To resolve the "text content blocks must be non-empty" error, you must ensure that every text block in your payload contains at least one non-whitespace character. Follow these steps:
1. **Validate the System Parameter**: If you are using a system prompt, ensure the string is not empty. If you do not have a system prompt to send, omit the `system` key entirely from the request body rather than sending an empty string.
2. **Check Content Block Strings**: Review the `messages` array and the `system` field. Ensure that every block with `"type": "text"` has a `"text"` property that is a non-empty string.
3. **Handle Dynamic Inputs**: If your prompts are generated dynamically, add a validation step in your code to check if the resulting string is empty or whitespace-only before making the API call.
4. **Verify SDK/Framework Configuration**: If using tools like LangChain or Dify, ensure that all `SystemMessage` or `UserPromptMessage` instances are properly populated with content.
5. **Review API Structure**: Ensure your request aligns with the [Anthropic Messages API](https://docs.anthropic.com/en/api/messages) requirements, specifically that the `messages` array is not empty and that the `content` field within those messages is populated.

## Suggested Links
- [https://github.com/continuedev/continue/issues/2006](https://github.com/continuedev/continue/issues/2006)
- [https://docs.anthropic.com/en/api/errors](https://docs.anthropic.com/en/api/errors)
- [https://www.restack.io/p/anthropic-answer-http-400-bad-request-cat-ai](https://www.restack.io/p/anthropic-answer-http-400-bad-request-cat-ai)
- [https://github.com/langchain-ai/langchain/issues/18646](https://github.com/langchain-ai/langchain/issues/18646)
- [https://forum.cursor.com/t/unable-to-reach-anthropic/22766](https://forum.cursor.com/t/unable-to-reach-anthropic/22766)
- [https://community.openai.com/t/content-is-required-property-error-400/486260](https://community.openai.com/t/content-is-required-property-error-400/486260)
- [https://docs.anthropic.com/en/api/messages](https://docs.anthropic.com/en/api/messages)
