---
title: "Invalid input: The provided input does not meet the expected format or values. Please consult the API reference for more information."
provider: "openai"
provider_icon: "/logos/openai.png"
solved: true
slug: "input-validation-error-9218"
---

## Raw Error Text

```text
'$.tool_choice' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
```

## Reason

The error occurs when the `tool_choice` parameter in an OpenAI Chat Completions API request contains a value that is either syntactically incorrect, unsupported by the selected model, or not recognized by the API version.

Key reasons for this error include:

- **Unsupported String Values**: The parameter may be set to a value like `"required"`. While newer models support this, older model versions (such as legacy `gpt-3.5-turbo` snapshots) may not recognize `"required"` as a valid option, leading to a 400 Bad Request.
- **Invalid Schema**: The `tool_choice` parameter expects specific formats: a string (e.g., `"none"`, `"auto"`, or `"required"` for compatible models) or a specific tool object. Providing an empty string, an incorrect object structure, or an unrecognized keyword will trigger an invalidation error.
- **Configuration Constraints**: This error indicates that the API request contains an configuration for `tool_choice` that does not meet the constraints defined in the OpenAI API documentation for the specific endpoint being called.

## Solution
To resolve the `'$.tool_choice' is invalid` error, ensure your request adheres to the following steps:
1. **Verify Allowed Values**: Check the OpenAI API reference to confirm the allowed values for the `tool_choice` parameter. Standard valid options typically include `"none"`, `"auto"`, or a tool-specific object.
2. **Validate Model Compatibility**: Ensure you are using a model version that supports your chosen `tool_choice` configuration. If you are using `"required"`, ensure your model (e.g., `gpt-4o` or `gpt-4-turbo`) and API version are current.
3. **Correct Parameter Formatting**: If you want to force the model to use a specific tool, ensure the object structure matches the required schema: `{"type": "function", "function": {"name": "my_function"}}`.
4. **Update API Client Libraries**: Ensure your SDK (OpenAI Python or Node.js) is updated to the latest version, as older library versions may not correctly serialize the `tool_choice` parameter.
5. **Review Request Payload**: Inspect the raw JSON being sent to the API to ensure no unexpected null values or typos are present in the `tool_choice` field.

## Suggested Links
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://community.openai.com/t/chat-completions-create-cannot-work-well-when-tool-choice-is-set-to-required/810996](https://community.openai.com/t/chat-completions-create-cannot-work-well-when-tool-choice-is-set-to-required/810996)
- [https://community.openai.com/t/content-is-required-property-error-400/486260](https://community.openai.com/t/content-is-required-property-error-400/486260)
- [https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807](https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807)
- [https://github.com/Azure/azure-rest-api-specs/issues/29844](https://github.com/Azure/azure-rest-api-specs/issues/29844)
- [https://community.openai.com/t/assistant-does-not-search-the-file-and-tool-choice-parameter-cannot-solve-it/767425](https://community.openai.com/t/assistant-does-not-search-the-file-and-tool-choice-parameter-cannot-solve-it/767425)
- [https://community.openai.com/t/sorry-i-couldnt-process-the-response-correctly/513153](https://community.openai.com/t/sorry-i-couldnt-process-the-response-correctly/513153)
- [https://community.openai.com/t/error-in-node-vec-0-error-code-400-error-message-input-is-invalid-please-check-the-api-reference-https-platform-openai-com-docs-api-reference-type-invalid-request-error-param-none-code-none/659606](https://community.openai.com/t/error-in-node-vec-0-error-code-400-error-message-input-is-invalid-please-check-the-api-reference-https-platform-openai-com-docs-api-reference-type-invalid-request-error-param-none-code-none/659606)
- [https://github.com/MicrosoftDocs/azure-docs/issues/118117](https://github.com/MicrosoftDocs/azure-docs/issues/118117)
- [https://platform.openai.com/docs/api-reference/chat/create#chat-create-tool_choice](https://platform.openai.com/docs/api-reference/chat/create#chat-create-tool_choice)
