---
title: "rayllm.backend.llm.error_handling.ValidationError: n>1 is not supported yet in aviary (Request ID: 57be219c-3db9-4434-a613-d2cb6dc1ff80)"
provider: "anyscale"
provider_icon: "/file.svg"
solved: true
slug: "validation-error-9516"
---

## Reason

This error is a `400 Bad Request` triggered by a `ValidationError` within Anyscale's **rayllm** (formerly Aviary) backend. It occurs when a request violates specific schema constraints defined by the model-serving infrastructure. Key reasons include:
1. **Unsupported Parameter Value**: The error message `n>1 is not supported yet in aviary` explicitly indicates that the `n` parameter (which requests multiple completion choices for a single prompt) is set to a value greater than
1. The current implementation of the serving backend for these models only supports a single completion per request.
2. **Invalid Request Body**: The request may be malformed or contain query parameters that do not align with the API's expected schema. This includes using extra fields that are not permitted or providing invalid values for supported parameters.
3. **Request Exceeding Limits**: The API enforces strict validation limits. While this specific error focuses on the `n` parameter, similar validation errors can occur if the request exceeds other implementation-specific bounds, such as maximum input length or unsupported sampling configurations.

## Solution
To resolve the 400 validation error, you must modify your request to align with Anyscale's supported parameters and constraints. Follow these steps:
1. **Modify the 'n' Parameter**: Locate the `n` parameter in your API request body and set it to `1`. If you do not explicitly require multiple choices, you can remove the parameter entirely, as it defaults to `1`.
2. **Implement Client-Side Looping**: If your application requires multiple variations of a response for the same prompt, you should send multiple separate API requests rather than attempting to use the `n` parameter in a single call.
3. **Audit Request Data**: Review the request body and query parameters to ensure they are correctly formatted and do not contain any extra or unsupported fields that might trigger a validation failure.
4. **Verify Parameter Ranges**: Ensure that other values provided (such as `temperature`, `top_p`, or `max_tokens`) adhere to the supported limits and constraints defined for the specific model you are using.
5. **Consult Documentation**: Refer to the Anyscale API documentation for the most current guidelines on supported parameters and their valid ranges, as backend capabilities may change with newer versions of RayLLM.

## Suggested Links
- [https://docs.anyscale.com/endpoints/model-serving/parameters](https://docs.anyscale.com/endpoints/model-serving/parameters)
- [https://github.com/ray-project/ray-llm](https://github.com/ray-project/ray-llm)
