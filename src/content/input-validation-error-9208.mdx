---
title: "Function name does not conform to the required pattern: Only letters, numbers, underscores, or hyphens are allowed, with a maximum length of 64 characters."
provider: "openai"
provider_icon: "/logos/openai.png"
solved: true
slug: "input-validation-error-9208"
---

## Raw Error Text

```text
'multi_tool_use.parallel' does not match '^[a-zA-Z0-9_-]{1,64}$' - 'messages.10.tool_calls.0.function.name'
```

## Reason

The error `'multi_tool_use.parallel' does not match '^[a-zA-Z0-9_-]{1,64}$'` occurs when the OpenAI model (typically GPT-4 Turbo or GPT-4o) hallucinations an internal tool name during parallel function calling. 

**Technical Root Causes:**
1. **Schema Violation**: The OpenAI API enforces a strict naming convention for functions/tools defined by the regex `^[a-zA-Z0-9_-]{1,64}$`. This pattern allows only alphanumeric characters, underscores, and hyphens. The period (`.`) in `multi_tool_use.parallel` causes an immediate validation failure.
2. **Model Leakage**: This name is an internal wrapper used by OpenAI models to handle multiple tool executions. In some instances, the model fails to strip this internal identifier, resulting in it being sent as the function name in the `tool_calls` object.
3. **Recursive Calling Issues**: The error often appears when the model attempts to invoke nested calls that the API's internal processing layer cannot properly translate into a standard flat array of tool calls.

## Solution
To resolve the 400 status error caused by the `multi_tool_use.parallel` hallucination, follow these remediation steps:
1. **Ignore and Retry**: If your application detects a tool name containing a period or specifically matching `multi_tool_use.parallel`, discard that specific response and resend the request. This behavior is often intermittent, and a retry frequently yields a valid response.
2. **Local Schema Validation**: Implement a pre-processing check on the model's response. Validate all tool names against the regex `^[a-zA-Z0-9_-]{1,64}$` before your application attempts to process them or send tool outputs back to the API.
3. **Sanitize or Unpack Tool Calls**: In some cases, the actual valid tool calls and their parameters are nested within the `arguments` field of the hallucinated `multi_tool_use.parallel` call. You can write a parser to extract these nested calls and reform them into a standard tool call array.
4. **Refine System Prompts**: Explicitly instruct the model in your system message to use only the provided tool names and to avoid any internal parallelization syntax.
5. **Avoid Deep Nesting**: Reduce the complexity of tool instructions and nested logic, as highly complex requests are more likely to trigger internal model wrappers that lead to this hallucination.
6. **Adjust Model Parameters**: Consider slightly lowering the `temperature` or `top_p` settings to increase the deterministic nature of the model's output, which can reduce hallucinations.

## Suggested Links
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://community.openai.com/t/the-multi-tool-use-parallel-bug-and-how-to-fix-it/880771](https://community.openai.com/t/the-multi-tool-use-parallel-bug-and-how-to-fix-it/880771)
- [https://github.com/microsoft/semantic-kernel/issues/4447](https://github.com/microsoft/semantic-kernel/issues/4447)
- [https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807](https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807)
- [https://github.com/phdowling/openai_multi_tool_use_parallel_patch](https://github.com/phdowling/openai_multi_tool_use_parallel_patch)
- [https://github.com/run-llama/llama_index/issues/8853](https://github.com/run-llama/llama_index/issues/8853)
- [https://community.openai.com/t/getting-400-response-with-already-working-code/509212](https://community.openai.com/t/getting-400-response-with-already-working-code/509212)
- [https://learn.microsoft.com/fi-fi/azure/ai-services/openai/reference](https://learn.microsoft.com/fi-fi/azure/ai-services/openai/reference)
- [https://community.openai.com/t/model-tries-to-call-unknown-function-multi-tool-use-parallel/490653](https://community.openai.com/t/model-tries-to-call-unknown-function-multi-tool-use-parallel/490653)
- [https://github.com/vercel/ai/issues/2786](https://github.com/vercel/ai/issues/2786)
