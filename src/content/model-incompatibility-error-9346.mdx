---
title: "The embeddings operation does not work with the specified model. Please choose a different model and try again. You can learn more about compatible models for each operation here: https://go.microsoft.com/fwlink/?linkid=2197993."
provider: "azure-openai"
provider_icon: "/file.svg"
solved: true
slug: "model-incompatibility-error-9346"
---

## Raw Error Text

```text
The embeddings operation does not work with the specified model, gpt-4. Please choose different model and try again. You can learn more about which models can be used with each operation here: https://go.microsoft.com/fwlink/?linkid=2197993.
```

## Reason

The 400 Bad Request error occurs because the Azure OpenAI Service does not support using generative models for embedding operations. This mismatch typically happens due to two primary factors:

**Incompatible Model Selection**
The error message explicitly states that the embeddings operation does not work with `gpt-4`. Generative models like the `gpt-4` and `gpt-3.5-turbo` families are architected for text completion and chat, whereas embedding operations require specialized models designed to convert text into high-dimensional vector representations.

**Invalid Request Configuration**
In Azure OpenAI, requests are routed to specific 'deployments'. A 400 status code is returned when a request is sent to the `/embeddings` endpoint but specifies a deployment tied to a non-embedding model. Because the model's underlying architecture cannot process the vectorization request, the server rejects the configuration as invalid.

## Solution
To resolve this error, you must use a compatible embedding model and ensure your Azure deployment is correctly configured for the embeddings API. Follow these steps:
1. **Choose a Compatible Embedding Model**
   Replace the generative model (e.g., `gpt-4`) with a model designed for embeddings. Recommended models include:
   - `text-embedding-3-small` (High efficiency)
   - `text-embedding-3-large` (Highest performance)
   - `text-embedding-ada-002` (Standard compatibility)
2. **Update the Request Configuration**
   Ensure that the model or deployment name specified in your API call matches an active embedding model deployment in your Azure OpenAI resource.
3. **Verify Deployment in Azure AI Studio**
   Log in to Azure AI Studio, navigate to the 'Deployments' section, and confirm that you have a deployment for an embedding-class model. Note the exact 'Deployment name' to use in your application code.
4. **Check API Parameters and Documentation**
   Ensure that other parameters, such as the `deployment-id`, `api-key`, and `api-version` (e.g., `2023-05-15`), are correctly specified. Refer to the Azure OpenAI Service documentation to confirm which models are supported for embeddings in your specific region.

## Suggested Links
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://learn.microsoft.com/en-us/answers/questions/1275410/ratelimiterror-requests-to-the-embeddings-create-o](https://learn.microsoft.com/en-us/answers/questions/1275410/ratelimiterror-requests-to-the-embeddings-create-o)
- [https://learn.microsoft.com/en-us/answers/questions/2084649/langchain-azure-openai-problem-the-embeddings-oper](https://learn.microsoft.com/en-us/answers/questions/2084649/langchain-azure-openai-problem-the-embeddings-oper)
- [https://learn.microsoft.com/en-us/answers/questions/1479386/azure-openai-api-calling-issue](https://learn.microsoft.com/en-us/answers/questions/1479386/azure-openai-api-calling-issue)
- [https://github.com/assafelovic/gpt-researcher/issues/936](https://github.com/assafelovic/gpt-researcher/issues/936)
- [https://learn.microsoft.com/fi-fi/azure/ai-services/openai/reference](https://learn.microsoft.com/fi-fi/azure/ai-services/openai/reference)
- [https://github.com/Azure/azure-sdk-for-java/blob/main/sdk/openai/azure-ai-openai/TROUBLESHOOTING.md](https://github.com/Azure/azure-sdk-for-java/blob/main/sdk/openai/azure-ai-openai/TROUBLESHOOTING.md)
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#embeddings](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#embeddings)
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#embeddings](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#embeddings)
