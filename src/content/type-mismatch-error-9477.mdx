---
title: "'null' is not of type 'array' - 'messages'"
provider: "openai"
provider_icon: "/logos/openai.svg"
solved: true
slug: "type-mismatch-error-9477"
---

## Reason

The HTTP 400 Bad Request error with the message `'null' is not of type 'array' - 'messages'` occurs when the OpenAI API receives a request payload where the mandatory `messages` field is either missing, null, or formatted as a non-array type. 

Key causes include:

**Invalid JSON Payload**
The JSON body sent to the API is malformed or structurally incorrect. The `messages` field is a required parameter for Chat Completions, and if it is omitted or assigned a value of `null`, the schema validation fails.

**Incorrect API Request Parameters**
This error highlights a mismatch between the expected schema and the actual data sent. The API expects an array of objects (e.g., `[{"role": "user", "content": "..."}]`). If the client application passes a string, a single object, or a null variable to this field, the API will reject the request.

**Model or Endpoint Specific Constraints**
Certain endpoints, particularly `/v1/chat/completions`, have strict requirements for the `messages` parameter. If you are migrating from the legacy `/v1/completions` endpoint (which uses a `prompt` string), failing to wrap your input in the required array structure will trigger this error.

**API Key or Authentication Issues**
While less frequent for this specific type mismatch error, malformed authentication headers or issues with the API key configuration can occasionally interfere with how the server parses the incoming request body.

## Solution
To resolve this error, ensure that your API request is correctly structured and that the `messages` parameter strictly adheres to the expected array format. Follow these steps:
1. **Ensure the messages Field is an Array**: Explicitly check that the `messages` field in your JSON payload is initialized as an array and contains at least one message object. It should never be `null` or `undefined`.
2. **Verify Required Field Formatting**: Confirm that each object within the `messages` array contains the required `role` (e.g., "system", "user", or "assistant") and `content` keys.
3. **Validate Parameter Types**: Use a JSON validator or log the raw request body before sending it to ensure the structure looks like this: `{"model": "gpt-4", "messages": [{"role": "user", "content": "Hello!"}]}`.
4. **Check for Variable Initialization**: If you are building the message list dynamically in your code, ensure the variable is defined as an empty array `[]` before you start appending messages to it.
5. **Confirm API Key and Headers**: Verify that your `Authorization` header is set to `Bearer YOUR_API_KEY` and the `Content-Type` is `application/json` to prevent parsing errors on the server side.

## Suggested Links
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://forum.bubble.io/t/openai-api-error-http-400/263917](https://forum.bubble.io/t/openai-api-error-http-400/263917)
- [https://community.openai.com/t/request-failed-with-status-code-400/39242](https://community.openai.com/t/request-failed-with-status-code-400/39242)
- [https://github.com/Nutlope/aicommits/issues/137](https://github.com/Nutlope/aicommits/issues/137)
- [https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807](https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807)
- [https://forum.bubble.io/t/robust-json-validation-in-bubble-for-openai-api-call/296829](https://forum.bubble.io/t/robust-json-validation-in-bubble-for-openai-api-call/296829)
- [https://community.openai.com/t/api-authentication-issue-cant-find-out-why/263803](https://community.openai.com/t/api-authentication-issue-cant-find-out-why/263803)
- [https://github.com/vllm-project/vllm/issues/3906](https://github.com/vllm-project/vllm/issues/3906)
- [https://platform.openai.com/docs/guides/structured-outputs](https://platform.openai.com/docs/guides/structured-outputs)
- [https://platform.openai.com/docs/api-reference/chat/create](https://platform.openai.com/docs/api-reference/chat/create)
