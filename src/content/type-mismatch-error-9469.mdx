---
title: "The input message does not match the required object type in 'messages.0'. Please ensure your query is formatted correctly and matches the expected data structure."
provider: "azure-openai"
provider_icon: "/file.svg"
solved: true
slug: "type-mismatch-error-9469"
---

## Raw Error Text

```text
'customer has a query where is my order, I would like you to choose a question from list that best matches the intent and context and could be used to reply for same.' is not of type 'object' - 'messages.0'
```

## Reason

The 400 status error in the Azure OpenAI API indicates that the request payload, specifically at index `messages.0`, does not conform to the expected JSON schema. The API expects the `messages` parameter to be an array of objects, but a raw string was provided instead.

Key reasons for this error include:
1. **Invalid Data Type**: The error message "is not of type 'object'" signifies that the first element in the `messages` array was passed as a string rather than a structured JSON object. Chat-based models (e.g., GPT-4, GPT-3.5-Turbo) require a conversation transcript format.
2. **Missing Required Properties**: Each message in the array must be an object containing mandatory fields, specifically `role` (e.g., "system", "user", "assistant") and `content`. If these are missing, the validation fails.
3. **Incorrect Request Configuration**: The error can occur if the `Content-Type` header is not set to `application/json` or if the request body is not a correctly formatted JSON string.
4. **Content Filter and Policy Violations**: While less frequent for this specific type mismatch, the prompt content might be triggering Azure OpenAI's content management filters, resulting in a rejected request.

## Solution
To resolve the 400 error, you must ensure the request payload is correctly structured according to the Azure OpenAI Chat Completions API specifications. 

Follow these remediation steps:
1. **Format Messages as Objects**: Ensure that every item in the `messages` array is an object. Instead of passing a raw string, use the following structure:
`{"role": "user", "content": "customer has a query where is my order..."}`.
2. **Include All Required Properties**: Verify that each message object contains the `role` and `content` keys. For the first message, typically use the "system" or "user" role.
3. **Set Correct Headers**: Confirm that the `Content-Type` header is explicitly set to `application/json` in your HTTP request.
4. **Validate JSON Payload**: Ensure the request body is a valid, single-encoded JSON string. Avoid double-encoding or passing raw objects if your client library expects a stringified body.
5. **Check Content Policy Compliance**: Review the input text to ensure it complies with Azure OpenAI's safety and management policies to prevent secondary filter-related rejections.

## Suggested Links
- [https://github.com/FlowiseAI/Flowise/issues/195](https://github.com/FlowiseAI/Flowise/issues/195)
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://community.openai.com/t/content-is-required-property-error-400/486260](https://community.openai.com/t/content-is-required-property-error-400/486260)
- [https://learn.microsoft.com/en-us/answers/questions/1479386/azure-openai-api-calling-issue](https://learn.microsoft.com/en-us/answers/questions/1479386/azure-openai-api-calling-issue)
- [https://github.com/Azure/azure-sdk-for-java/blob/main/sdk/openai/azure-ai-openai/TROUBLESHOOTING.md](https://github.com/Azure/azure-sdk-for-java/blob/main/sdk/openai/azure-ai-openai/TROUBLESHOOTING.md)
- [https://bobcares.com/blog/azure-openai-invalid_request_error/](https://bobcares.com/blog/azure-openai-invalid_request_error/)
- [https://community.openai.com/t/azure-open-ai-assistant-api-connection-error/662198](https://community.openai.com/t/azure-open-ai-assistant-api-connection-error/662198)
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions)
