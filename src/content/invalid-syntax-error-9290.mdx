---
title: "Invalid usage of syntax or function call detected. Please check the API reference for proper guidelines: https://platform.openai.com/docs/api-reference."
provider: "azure-openai"
provider_icon: "/file.svg"
solved: true
slug: "invalid-syntax-error-9290"
---

## Raw Error Text

```text
"$.function_call" is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
```

## Reason

The **400 Bad Request** error with the message `"$.function_call" is invalid` occurs when the Azure OpenAI service cannot validate the structure of the `function_call` property within your request payload. 

Key reasons for this error include:
1.  **Invalid Property Structure**: The value assigned to `function_call` does not match the expected schema. It must be either a string (such as `"auto"` or `"none"`) or an object specifying a specific function (e.g., `{"name": "my_function"}`).
2.  **Schema Mismatch**: The request payload may contain properties that are incompatible with the selected model or the specific API version being used. For example, using legacy function parameters with newer models that prefer the `tools` architecture.
3.  **Missing or Malformed Parameters**: Essential components of the request, such as the `messages` array or the `functions` definition, may be missing, incorrectly formatted, or contain data types that the API cannot parse.
4.  **Deprecation Issues**: OpenAI and Azure OpenAI have transitioned from the legacy `functions` and `function_call` parameters to the more robust `tools` and `tool_choice` parameters. Using the older syntax on certain model versions can trigger validation failures.
5.  **Syntax and Configuration Errors**: General issues such as incorrect JSON formatting, invalid request headers, or using an API version that does not support function calling.

## Solution
To resolve the invalid syntax error, ensure your request adheres to the Azure OpenAI Chat Completion schema. Follow these steps:
1.  **Validate the function_call Parameter**: Ensure `function_call` is set to a valid value. If you want the model to decide, use `"auto"`. If you want to force a specific function, use the object format: `{"name": "your_function_name"}`.
2.  **Verify Function Definitions**: Check that the `functions` array (or `tools` array) is correctly defined. Each function must have a `name`, and its `parameters` must be a valid JSON Schema object.
3.  **Check API Version and Model Compatibility**: Ensure you are using a supported API version (e.g., `2023-07-01-preview` or later) and a model that supports function calling (e.g., `gpt-35-turbo` or `gpt-4`).
4.  **Migrate to Tools API**: If you are using newer models, consider replacing `functions` and `function_call` with `tools` and `tool_choice`. This is the currently recommended standard for Azure OpenAI and OpenAI.
5.  **Audit Request Syntax**: Use a JSON validator to ensure the entire payload is syntactically correct. Verify that all required headers, such as `api-key` and `Content-Type: application/json`, are present.
6.  **Review Official Documentation**: Compare your request payload against the latest Azure OpenAI service REST API reference to ensure no deprecated fields are being used.

## Suggested Links
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/function-calling](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/function-calling)
- [https://platform.openai.com/docs/api-reference/chat/create#chat-create-function_call](https://platform.openai.com/docs/api-reference/chat/create#chat-create-function_call)
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/reference](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference)
