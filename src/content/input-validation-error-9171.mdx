---
title: "Invalid key in 'logit_bias': additionalProp1. You should only be submitting non-negative integers."
provider: "openai"
provider_icon: "/logos/openai.svg"
solved: true
slug: "input-validation-error-9171"
---

## Reason

The `400 Bad Request` error in the OpenAI API occurs when the server cannot process the request due to client-side issues. Based on the error message `Invalid key in 'logit_bias': additionalProp1`, the primary cause is a schema validation failure. Specifically, the `logit_bias` parameter expects a map where keys are token IDs (which must be non-negative integers represented as strings) and values are bias levels between -100 and 100. The presence of `additionalProp1` suggests the request sent an invalid or placeholder key often generated by improperly configured API clients or SDKs.

Other contributing factors for a `400` status include:
1. **Invalid API Key**: Using a key that is incorrect, expired, or deactivated in the OpenAI Developer Dashboard.
2. **Rate Limiting**: Sending requests that exceed the allotted quota for your tier, leading to temporary throttling.
3. **Invalid Request Parameters**: Including unsupported properties or fields that do not comply with the API's strict JSON schema.
4. **Incorrect Syntax**: Formatting issues such as improper JSON nesting or unexpected characters (e.g., new lines) in the input text.
5. **Model-Specific Constraints**: Attempting to use parameters that the specific model does not support, such as `dimensions` with models that lack that capability.
6. **Network Connectivity**: High latency or packet loss causing corrupted payloads during transmission.

## Solution
To resolve the `400` status error and specifically fix the `logit_bias` issue, follow these steps:
1. **Correct logit_bias Keys**: Ensure the keys in your `logit_bias` object are valid token IDs. Use the OpenAI Tiktoken library to find the correct integer IDs for the tokens you wish to bias. Do not use generic keys like `additionalProp1`.
2. **Verify API Credentials**: Double-check that your API key is correctly copied from the dashboard and has not been revoked.
3. **Sanitize Request Parameters**: Review the API documentation to ensure all sent parameters are supported. Remove any unrecognized properties from the request body.
4. **Monitor Usage Quotas**: Check your organization's usage limits and current balance to ensure you are not hitting rate limits.
5. **Validate JSON Syntax**: Ensure your request body is valid JSON and does not contain formatting errors. Use a JSON validator if necessary.
6. **Confirm Model Compatibility**: Verify that the model you are calling (e.g., `gpt-4o` or `gpt-3.5-turbo`) supports the parameters you have included in the request.
7. **Debug Network Traffic**: Use a tool like `curl` with the `-v` flag or an HTTP proxy to inspect the raw request being sent to OpenAI's servers to identify discrepancies.

## Suggested Links
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://github.com/Significant-Gravitas/AutoGPT/issues/896](https://github.com/Significant-Gravitas/AutoGPT/issues/896)
- [https://community.openai.com/t/getting-400-response-with-already-working-code/509212](https://community.openai.com/t/getting-400-response-with-already-working-code/509212)
- [https://help.openai.com/en/articles/6882433-incorrect-api-key-provided](https://help.openai.com/en/articles/6882433-incorrect-api-key-provided)
- [https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807](https://community.openai.com/t/intermittent-error-an-unexpected-error-occurred-error-code-400-error-message-this-model-does-not-support-specifying-dimensions-type-invalid-request-error-param-none-code-none/955807)
- [https://github.com/vllm-project/vllm/issues/1351](https://github.com/vllm-project/vllm/issues/1351)
- [https://community.openai.com/t/logitbias-not-working-properly-for-chatcompletions-api/80883](https://community.openai.com/t/logitbias-not-working-properly-for-chatcompletions-api/80883)
- [https://learn.microsoft.com/en-us/answers/questions/1532521/run-failed-openai-api-hits-badrequesterror-error-c](https://learn.microsoft.com/en-us/answers/questions/1532521/run-failed-openai-api-hits-badrequesterror-error-c)
- [https://platform.openai.com/docs/api-reference/chat/create#chat-create-logit_bias](https://platform.openai.com/docs/api-reference/chat/create#chat-create-logit_bias)
