---
title: "Invalid schema for function 'information_extraction': ['Tech Sector Concerns', 'Bot Development Work', 'Expense Question', 'API Configuration Progress'] is not of type 'object', 'boolean'"
provider: "azure-openai"
provider_icon: "/file.svg"
solved: true
slug: "schema-validation-error-9431"
---

## Reason

The Azure OpenAI API 400 Bad Request error with the message "Invalid schema for function" occurs when the request payload fails to satisfy the JSON Schema defined for a specific function or tool. 

Key reasons for this failure include:
1. **Type Mismatch during Validation**: The validation engine detected that the input data (an array of strings such as `['Tech Sector Concerns', ...]`) does not match the required types specified in the schema. In this case, the schema for the `information_extraction` function expected either an `object` or a `boolean`, but an array was provided.
2. **Stricter Validation Rules**: Recent updates to Azure OpenAI (particularly concerning Structured Outputs) have introduced stricter enforcement of JSON Schema. Even minor deviations, such as missing properties or using unsupported types for a field, will trigger a validation error.
3. **Incorrect Request Payload Structure**: The data sent in the API request does not align with the `parameters` definition of the function. This often happens if the input is not correctly nested or if the `type` property in the JSON Schema is defined incorrectly for the intended data.
4. **Model and API Version Constraints**: Different models and API versions (e.g., `2024-10-21`) have specific requirements for schema definition. Using an older API version with a schema that utilizes newer features like `strict: true` or specific JSON Schema Draft 7 features can lead to validation failures.

## Solution
To resolve the "Invalid schema for function" error in Azure OpenAI, ensure that your data and schema definitions are perfectly aligned by following these steps:
1. **Correct the data type**: Review the function definition in your code. Ensure that the data passed to the `information_extraction` function matches the `type` specified in the schema. If the schema requires an `object` or `boolean`, do not pass an array of strings.
2. **Verify the request payload**: Manually inspect the JSON payload being sent. Ensure it conforms to the required structure, including all mandatory fields and correct nesting levels as defined in the `parameters` object of the tool definition.
3. **Check model-specific parameters**: If you are using Structured Outputs, confirm that your schema includes required keywords like `"additionalProperties": false` for every object and that you are using a supported model (e.g., `gpt-4o`).
4. **Inspect headers and content type**: Ensure that the `Content-Type` header is explicitly set to `application/json` in your HTTP request.
5. **Use a modern API version**: Ensure you are using a supported API version (such as `2024-10-21` or later) that correctly handles the schema features you are implementing.
6. **Review API documentation**: Refer to the official [Azure OpenAI Function Calling documentation](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/function-calling) and [Structured Outputs guide](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/structured-outputs) to ensure compliance with current schema and parameter requirements.

## Suggested Links
- [https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400](https://cheatsheet.md/chatgpt-cheatsheet/openai-api-error-axioserror-request-failed-status-code-400)
- [https://github.com/instructor-ai/instructor/issues/961](https://github.com/instructor-ai/instructor/issues/961)
- [https://learn.microsoft.com/en-us/answers/questions/1479386/azure-openai-api-calling-issue](https://learn.microsoft.com/en-us/answers/questions/1479386/azure-openai-api-calling-issue)
- [https://community.openai.com/t/badrequesterror-invalid-schema-for-function/580803](https://community.openai.com/t/badrequesterror-invalid-schema-for-function/580803)
- [https://community.openai.com/t/how-can-i-write-a-post-request-for-azure-openai-that-uses-structured-output/898569](https://community.openai.com/t/how-can-i-write-a-post-request-for-azure-openai-that-uses-structured-output/898569)
- [https://github.com/Azure/azure-sdk-for-java/blob/main/sdk/openai/azure-ai-openai/TROUBLESHOOTING.md](https://github.com/Azure/azure-sdk-for-java/blob/main/sdk/openai/azure-ai-openai/TROUBLESHOOTING.md)
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/function-calling](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/function-calling)
- [https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/structured-outputs](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/structured-outputs)
- [https://platform.openai.com/docs/guides/structured-outputs](https://platform.openai.com/docs/guides/structured-outputs)
