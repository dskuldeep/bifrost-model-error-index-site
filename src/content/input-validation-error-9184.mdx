---
title: "messages: at least one message is required"
provider: "anthropic"
provider_icon: "/logos/anthropic.png"
solved: true
slug: "input-validation-error-9184"
---

## Reason

The HTTP 400 Bad Request error `messages: at least one message is required` is a validation failure originating from the Anthropic Messages API. This error occurs when the server receives a request that does not contain a properly populated conversation history.

Key reasons for this error include:
1. **Empty Messages Array**: The `messages` field is present in the request body but is passed as an empty list (e.g., `"messages": []`). The API requires at least one interaction to process a completion.
2. **Missing Required Field**: The `messages` parameter is entirely absent from the JSON payload. Unlike legacy APIs that might have used a `prompt` string, the Messages API requires the `messages` field.
3. **Content Validation**: Every message object within the array must contain a `content` field that is non-empty. If a message object is provided but its content is an empty string (`""`), null, or missing, the API will reject the request with an `invalid_request_error`.
4. **Structural Issues**: The request may be incorrectly nested, or you may be using parameter names from the legacy Text Completions API which the Messages API does not recognize as valid conversation input.

## Solution
To resolve the HTTP 400 error and properly format your request for the Anthropic API, follow these steps:
1. **Populate the Messages Field**: Ensure the `messages` parameter is a non-empty array containing at least one object. This usually starts with a message from the `user` role.
2. **Verify Message Object Structure**: Each item in the array must be an object containing both `role` and `content` keys. Valid roles are `user` and `assistant`.
3. **Check for Empty Content**: Audit your code to ensure no message has an empty string for the `content` value. Even a single whitespace character is often required if a message block is included.
4. **Validate Your JSON Payload**: Use the following structure as a template for your request:

```json
{
  "model": "claude-3-5-sonnet-20240620",
  "max_tokens": 1024,
  "messages": [
    {
      "role": "user",
      "content": "Hello, Claude!"
    }
  ]
}
```
5. **Review API Versioning**: Confirm that you are sending the required `anthropic-version` header (e.g., `2023-06-01`) and targeting the `/v1/messages` endpoint.
6. **SDK Check**: If using the Anthropic Python or TypeScript SDK, ensure you are passing the `messages` argument as a list of dictionaries/objects to the `.messages.create()` method.

## Suggested Links
- [https://github.com/continuedev/continue/issues/2006](https://github.com/continuedev/continue/issues/2006)
- [https://www.googlecloudcommunity.com/gc/AI-ML/Unexpected-400-errors-with-Generated-Output-Schema/m-p/808440](https://www.googlecloudcommunity.com/gc/AI-ML/Unexpected-400-errors-with-Generated-Output-Schema/m-p/808440)
- [https://www.restack.io/p/anthropic-answer-http-400-bad-request-cat-ai](https://www.restack.io/p/anthropic-answer-http-400-bad-request-cat-ai)
- [https://community.openai.com/t/content-is-required-property-error-400/486260](https://community.openai.com/t/content-is-required-property-error-400/486260)
- [https://forum.cursor.com/t/unable-to-reach-anthropic/22766](https://forum.cursor.com/t/unable-to-reach-anthropic/22766)
- [https://support.anthropic.com/en/articles/10366432-i-m-getting-an-api-connection-error-how-can-i-fix-it](https://support.anthropic.com/en/articles/10366432-i-m-getting-an-api-connection-error-how-can-i-fix-it)
- [https://community.openai.com/t/request-failed-with-status-code-400/39242/25](https://community.openai.com/t/request-failed-with-status-code-400/39242/25)
- [https://github.com/cline/cline/issues/261](https://github.com/cline/cline/issues/261)
- [https://docs.anthropic.com/en/api/messages](https://docs.anthropic.com/en/api/messages)
- [https://docs.anthropic.com/en/api/errors](https://docs.anthropic.com/en/api/errors)
